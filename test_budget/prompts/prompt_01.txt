You are an expert wedding planner with extensive experience in budget allocation across different budget ranges. 
Your task is to intelligently allocate a wedding budget based on the geographical location of the wedding, the total available budget, the number of guests while taking into account a set of predefined priorities, minimum service costs and budget constraints. 
The wedding budget should be distributed across wedding categories, e.g. venue, catering, bridal dress, and which categories to include in the budget will depend on a set of input paremters.

You will receive the following input parameters:
* The location, city and country, of the wedding
* The total budget
* The number of guests

The input parameters for the wedding are: 
- Location: Madrid, Spain
- Number of guests: 150
- Total budget: €50,000

Propose a **realistic** budget allocation based on the aforementioned input parameters following the next steps:

## Step 1: Classify the wedding in one of the following tiers depending on the total budget:
- **Ultra Low Budget**: < €5,000 - Only absolute essentials
- **Low Budget**: €5,000-15,000 - Essentials + few extras
- **Medium Budget**: €15,000-35,000 - Good coverage of main categories
- **High Budget**: €35,000-75,000 - Most categories covered well
- **Luxury Budget**: > €75,000 - All categories possible with premium options

## Step 2: Identify the wedding categories depending on the tier:
**ESSENTIAL CATEGORIES** (Required for ANY wedding):
1. WEDDING_SUBCATEGORY_WEDDING_VENUES (or alternative location)
2. WEDDING_SUBCATEGORY_CATERING (food/drinks for guests)
3. WEDDING_SUBCATEGORY_BRIDE_DRESS

**SECONDARY PRIORITIES** (Add when budget > €10,000):
4. WEDDING_SUBCATEGORY_PHOTOGRAPHER
5. WEDDING_SUBCATEGORY_FLOWERS (basic)
6. WEDDING_SUBCATEGORY_GROOM_SUITS
7. WEDDING_SUBCATEGORY_BAKERY (wedding cake)

**TERTIARY PRIORITIES** (Add when budget > €25,000):
8. WEDDING_SUBCATEGORY_GUEST_INVITATIONS
9. WEDDING_SUBCATEGORY_VIDEOGRAPHER
10. WEDDING_SUBCATEGORY_DEEJAY or WEDDING_SUBCATEGORY_MUSIC_BAND
11. WEDDING_SUBCATEGORY_WEDDING_DECORATION (enhanced)
12. WEDDING_SUBCATEGORY_MAKEUP_BRIDE
13. WEDDING_SUBCATEGORY_HAIR_SALON_BRIDE

**LUXURY ADDITIONS** (Add when budget > €40,000):
14. WEDDING_SUBCATEGORY_WEDDING_PLANNER
15. WEDDING_SUBCATEGORY_PHOTO_BOOTH
16. WEDDING_SUBCATEGORY_GUEST_TRANSPORTATION
17. WEDDING_SUBCATEGORY_FIREWORKS
18. WEDDING_SUBCATEGORY_ORCHESTRA

## Step 3: Apply the following constraints and rules
Constraint 1: **Minimum reasonable values depending on the wedding city:**
- Venue minimum: Usually €2,000-5,000 depending on location
- Catering per person: €30-150 depending on location and tier
- Photographer: Minimum €800-1,500 for basic package
- Videographer: Minimum €1,000-2,000
- DJ: Minimum €500-1,000
- Flowers: Minimum €500 for basic arrangements
- Dress: Minimum €500-1,000

Constraint 2: **Maximum reasonable allocations (as % of total budget):**
- No single category should exceed 40% of total budget
- Venue + Catering combined shouldn't exceed 60% of total budget
- Photography + Videography combined shouldn't exceed 15% of total budget

Constraint 3: **The sum of the assigned budget for each wedding category should equal the available budget**. 

## Step 4: Calculate the budget allocation across the wedding categories while fulfilling the constraints explained in Step 3 and respecting the following IMPORTANT RULES:
1. **NEVER allocate to luxury categories if essentials aren't covered**
2. **RESPECT minimum viable costs** - don't allocate €100 to photography
3. **If venue includes catering**, don't double-allocate
4. **The sum across all categories MUST EQUAL the total budget NEVER should the sum across all wedding categories exceed the total budget**
5. **Only include categories that make sense for the budget tier**
6. **Provide ONLY JSON output, no explanations**

In addition, here are some rough guidelines that can help you guide the budget allocation depending on the total budget:
1. **For LOW BUDGETS (< €15,000)**:
   - Focus 80-90% on venue, catering, and legal requirements
   - Skip expensive items like fireworks, wedding planner, luxury transportation
   - Consider combined services (venue with catering included)

2. **For MEDIUM BUDGETS (€15,000-35,000)**:
   - Allocate 50-60% to venue and catering
   - Add photography, basic flowers, music
   - Include essential beauty services
   - Skip luxury items like fireworks, orchestra

3. **For HIGH BUDGETS (> €35,000)**:
   - Can afford most categories
   - Allocate based on actual market prices
   - Include nice-to-have services
   - Consider guest comfort (transportation, accommodation support)

Remember: A €5,000 wedding cannot have fireworks, but a €50,000 wedding should have proper photography, videography, and entertainment.

## Step 5: Return ONLY a valid JSON object with allocated amounts. Example:
```json
{
  "WEDDING_SUBCATEGORY_WEDDING_VENUES": 12000,
  "WEDDING_SUBCATEGORY_CATERING": 15000,
  "WEDDING_SUBCATEGORY_PHOTOGRAPHER": 2500
}
```

## Available Categories
- WEDDING_SUBCATEGORY_BACHELOR_PARTY
- WEDDING_SUBCATEGORY_BAKERY
- WEDDING_SUBCATEGORY_BEAUTICIAN_BRIDE
- WEDDING_SUBCATEGORY_BRIDE_ACCESSORIES
- WEDDING_SUBCATEGORY_BRIDE_DRESS
- WEDDING_SUBCATEGORY_BUSES
- WEDDING_SUBCATEGORY_CAR_RENTAL
- WEDDING_SUBCATEGORY_CATERING
- WEDDING_SUBCATEGORY_CEREMONY_MASTER
- WEDDING_SUBCATEGORY_DANCING_INSTRUCTOR
- WEDDING_SUBCATEGORY_DEEJAY
- WEDDING_SUBCATEGORY_FIREWORKS
- WEDDING_SUBCATEGORY_FLOWERS
- WEDDING_SUBCATEGORY_GROOM_SUITS
- WEDDING_SUBCATEGORY_GUEST_ACCOMMODATION
- WEDDING_SUBCATEGORY_GUEST_TRANSPORTATION
- WEDDING_SUBCATEGORY_GUEST_INVITATIONS
- WEDDING_SUBCATEGORY_HAIR_SALON_BRIDE
- WEDDING_SUBCATEGORY_HAIR_SALON_GROOM
- WEDDING_SUBCATEGORY_HEADPIECES
- WEDDING_SUBCATEGORY_HONEY_MOON
- WEDDING_SUBCATEGORY_JEWELRY
- WEDDING_SUBCATEGORY_LAWYER
- WEDDING_SUBCATEGORY_LINGERIE
- WEDDING_SUBCATEGORY_MAKEUP_BRIDE
- WEDDING_SUBCATEGORY_MUSIC_BAND
- WEDDING_SUBCATEGORY_NAIL_SALON
- WEDDING_SUBCATEGORY_ORCHESTRA
- WEDDING_SUBCATEGORY_PHOTO_BOOTH
- WEDDING_SUBCATEGORY_PHOTOGRAPHER
- WEDDING_SUBCATEGORY_VIDEOGRAPHER
- WEDDING_SUBCATEGORY_BRIDE_SHOES
- WEDDING_SUBCATEGORY_WEDDING_DECORATION
- WEDDING_SUBCATEGORY_GROOM_SHOES
- WEDDING_SUBCATEGORY_WEDDING_PLANNER
- WEDDING_SUBCATEGORY_WEDDING_VENUES
- WEDDING_SUBCATEGORY_GUEST_DRESSES